\i m4_regexp(MODULE_PATHNAME,
             `\(.*\)libmadlib\.so',
             `\1../../modules/recommendation_systems/test/movielens100k_dataset.setup.sql_in'
)

m4_include(`SQLCommon.m4')


-- train & test & predict --
select madlib.usercf_train('public.test_movielens100k_train','UserId','ItemId','Rating',10,TRUE,'public.test_movielens100k_test',10);
select madlib.usercf_predict('public.test_movielens100k_train','public.test_movielens100k_test','UserId','public.test_movielens100k_recommend',10);

-- train(not use iif) & test & predict --
select madlib.usercf_train('public.test_movielens100k_train','UserId','ItemId','Rating',10,FALSE,'public.test_movielens100k_test',10);
select madlib.usercf_predict('public.test_movielens100k_train','public.test_movielens100k_test','UserId','public.test_movielens100k_recommend',10);


-- train & test(use default parameter n) & predict --
select madlib.usercf_train('public.test_movielens100k_train','UserId','ItemId','Rating',10,TRUE,'public.test_movielens100k_test');
select madlib.usercf_predict('public.test_movielens100k_train','public.test_movielens100k_test','UserId','public.test_movielens100k_recommend',10);

-- train & predict --
select madlib.usercf_train('public.test_movielens100k_train','UserId','ItemId','Rating',10,TRUE);
select madlib.usercf_predict('public.test_movielens100k_train','public.test_movielens100k_test','UserId','public.test_movielens100k_recommend',10);

